---
import PageLayout from '@/layouts/PageLayout.astro';
import Hero from '@/components/landing/Hero.astro';
import Services from '@/components/landing/Services.astro';
import Testimonials from '@/components/landing/Testimonials.astro';
import SiboGuide from '@/components/landing/SiboGuide.astro';
import Transformations from '@/components/landing/Transformations.astro';
import signature from '@/assets/svg/signature.svg';
---

<PageLayout>
	<section class="w-full min-h-[calc(100vh-4rem)] md:min-h-auto flex items-center py-8 md:py-12">
		<Hero />
	</section>

	<!-- Como trabajo Section -->
	<section id="como-trabajo" class="w-full py-16 md:py-24 relative" style="background: linear-gradient(135deg, #E8BFB7 0%, #E8BFB7 50%, #E8BFB7 100%);">
		<!-- Top Wave -->
		<div class="absolute top-0 left-0 w-full overflow-hidden leading-0">
			<svg class="relative block w-full h-[60px] md:h-[80px]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none">
				<path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z" fill="#ffffff"></path>
			</svg>
		</div>

		<div class="container mx-auto px-4 md:px-6 relative z-10">
			<h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-center mb-8 font-recoleta text-white">Cómo trabajo</h2>
			<div class="max-w-4xl mx-auto">
				<p class="text-lg text-white leading-relaxed mb-12 text-center">
				Mi enfoque va mucho más allá de una simple pauta de alimentación o entrenamiento. Junto con Ahinoa, dietista especializada en PNI y con una historia personal de recuperación similar a la mía, acompañamos a cada persona a entender su cuerpo, recuperar su salud y reconectar con su bienestar físico y mental, desde una mirada integral.
				</p>
				
				<div class="space-y-10 text-white">
					<!-- Step 1 -->
					<div class="text-left">
						<h3 class="text-2xl font-bold mb-3 font-recoleta">1. Comprender el origen</h3>
						<p class="text-lg leading-relaxed opacity-95">
							Todo proceso empieza por entender qué está pasando realmente en tu cuerpo. En las primeras sesiones analizamos tus síntomas, hábitos, historia digestiva, estado emocional y estilo de vida. El objetivo es encontrar la raíz de lo que te está ocurriendo, no solo tratar los síntomas.
						</p>
					</div>

					<!-- Step 2 -->
					<div class="text-left">
						<h3 class="text-2xl font-bold mb-3 font-recoleta">2. Reeducar y acompañar</h3>
						<p class="text-lg leading-relaxed opacity-95">
							Mi trabajo no consiste en darte un plan que seguir sin más, sino en enseñarte a tomar decisiones conscientes sobre tu alimentación, entrenamiento y autocuidado. Aprendes a escuchar a tu cuerpo y entender qué necesita en cada momento.
						</p>
					</div>

					<!-- Step 3 -->
					<div class="text-left">
						<h3 class="text-2xl font-bold mb-3 font-recoleta">3. Adaptar y personalizar</h3>
						<p class="text-lg leading-relaxed opacity-95">
							Cada persona tiene un punto de partida distinto. Por eso no existe un método único, sino un proceso que se adapta a ti: desde la recuperación digestiva (SIBO, hipoclorhidria, inflamación, alergias) hasta la mejora del rendimiento físico o la pérdida de peso.
						</p>
					</div>

					<!-- Step 4 -->
					<div class="text-left">
						<h3 class="text-2xl font-bold mb-3 font-recoleta">4. Integrar la salud en tu vida</h3>
						<p class="text-lg leading-relaxed opacity-95 mb-4">
							Buscamos cambios reales y sostenibles, que puedas mantener a largo plazo sin sentirte limitada. Trabajamos sobre cuatro pilares:
						</p>
						<ul class="space-y-2 text-lg ml-6">
							<li class="flex items-start">
								<span class="mr-3">•</span>
								<span class="opacity-95">Alimentación consciente y personalizada</span>
							</li>
							<li class="flex items-start">
								<span class="mr-3">•</span>
								<span class="opacity-95">Movimiento adaptado a tu nivel</span>
							</li>
							<li class="flex items-start">
								<span class="mr-3">•</span>
								<span class="opacity-95">Descanso, gestión del estrés y las emociones</span>
							</li>
							<li class="flex items-start">
								<span class="mr-3">•</span>
								<span class="opacity-95">Conexión cuerpo-mente</span>
							</li>
						</ul>
					</div>

					<!-- Step 5 -->
					<div class="text-left">
						<h3 class="text-2xl font-bold mb-3 font-recoleta">5. Autonomía y bienestar duradero</h3>
						<p class="text-lg leading-relaxed opacity-95">
							Mi meta es que termines este proceso sin depender de mí, entendiendo cómo mantener tu equilibrio y disfrutando de una salud plena, desde la energía y la calma.
						</p>
					</div>
				</div>

				<div class="flex justify-center mt-12">
					<img src={signature.src} alt="Sara Carvia signature" class="w-48 md:w-64 h-auto text-white" />
				</div>
			</div>
		</div>

		<!-- Bottom Wave -->
		<div class="absolute bottom-0 left-0 w-full overflow-hidden leading-0 rotate-180">
			<svg class="relative block w-full h-[60px] md:h-[80px]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none">
				<path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z" fill="#f9fafb"></path>
			</svg>
		</div>
	</section>

	<!-- Services Section -->
	<section id="servicios" class="w-full py-16 md:py-24 bg-gray-50">
		<Services />
	</section>

	<!-- Testimonials Section -->
	<section id="testimonios" class="w-full py-16 md:py-24 bg-white">
		<Testimonials />
	</section>

	<!-- SIBO Guide Section -->
	<section id="guia-sibo" class="w-full py-16 md:py-24 bg-gray-50">
		<SiboGuide />
	</section>

	<!-- Transformations section -->
	<section id="transformaciones" class="w-full py-16 md:py-24 bg-gray-50">
		<Transformations />
	</section>

	<!-- Floating CTA Button -->
	<div id="floating-cta" class="fixed bottom-6 left-1/2 -translate-x-1/2 z-40 opacity-0 invisible transition-all duration-300 pointer-events-none">
		<a 
			href="https://wa.link/tfqerf" 
			class="inline-flex items-center justify-center px-8 py-4 text-base font-semibold text-gray-900 rounded-full shadow-lg transition-all duration-300 hover:shadow-xl hover:scale-105 whitespace-nowrap"
			style="background: linear-gradient(135deg, #FFE2EE 0%, #FFB3D9 50%, #FFE2EE 100%);"
		>
			Comienza tu transformación
		</a>
	</div>
</PageLayout>

<script>
	// Show floating CTA when hero buttons are out of view
	const floatingCta = document.getElementById('floating-cta');
	const heroSection = document.querySelector('section');
	
	if (floatingCta && heroSection) {
		const observer = new IntersectionObserver(
			(entries) => {
				entries.forEach((entry) => {
					if (entry.isIntersecting) {
						// Hero is visible - hide floating CTA
						floatingCta.classList.add('opacity-0', 'invisible', 'pointer-events-none');
					} else {
						// Hero is not visible - show floating CTA
						floatingCta.classList.remove('opacity-0', 'invisible', 'pointer-events-none');
					}
				});
			},
			{
				threshold: 0.1,
				rootMargin: '0px'
			}
		);
		
		observer.observe(heroSection);
	}
</script>

