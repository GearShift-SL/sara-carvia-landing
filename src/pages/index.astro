---
import PageLayout from '@/layouts/PageLayout.astro';
import Hero from '@/components/landing/Hero.astro';
import Services from '@/components/landing/Services.astro';
import SiboGuide from '@/components/landing/SiboGuide.astro';
import Transformations from '@/components/landing/Transformations.astro';
import signature from '@/assets/svg/signature.svg';
---

<PageLayout>
	<section class="w-full min-h-[calc(100vh-4rem)] md:min-h-auto flex items-center py-8 md:py-12">
		<Hero />
	</section>

	<!-- Como trabajo Section -->
	<section id="como-trabajo" class="w-full py-16 md:py-24 relative" style="background: linear-gradient(135deg, #FFE2EE 0%, #FFF0F6 50%, #FFE2EE 100%);">
		<!-- Top Wave -->
		<div class="absolute top-0 left-0 w-full overflow-hidden leading-0">
			<svg class="relative block w-full h-[60px] md:h-[80px]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none">
				<path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z" fill="#ffffff"></path>
			</svg>
		</div>

		<div class="container mx-auto px-4 md:px-6 relative z-10">
			<h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-center mb-8 font-recoleta text-gray-900">Cómo trabajo</h2>
			<div class="max-w-3xl mx-auto text-center">
				<p class="text-lg text-gray-700 leading-relaxed mb-8">
					Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
				</p>
				<div class="flex justify-center">
					<img src={signature.src} alt="Sara Carvia signature" class="w-48 md:w-64 h-auto" />
				</div>
			</div>
		</div>

		<!-- Bottom Wave -->
		<div class="absolute bottom-0 left-0 w-full overflow-hidden leading-0 rotate-180">
			<svg class="relative block w-full h-[60px] md:h-[80px]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none">
				<path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z" fill="#f9fafb"></path>
			</svg>
		</div>
	</section>

	<!-- Services Section -->
	<section id="servicios" class="w-full py-16 md:py-24 bg-gray-50">
		<Services />
	</section>

	<!-- SIBO Guide Section -->
	<section id="guia-sibo" class="w-full py-16 md:py-24 bg-white">
		<SiboGuide />
	</section>

	<!-- Transformations section -->
	<section id="transformaciones" class="w-full py-16 md:py-24 bg-gray-50">
		<Transformations />
	</section>

	<!-- Floating CTA Button -->
	<div id="floating-cta" class="fixed bottom-6 left-1/2 -translate-x-1/2 z-40 opacity-0 invisible transition-all duration-300 pointer-events-none">
		<a 
			href="#contacto" 
			class="inline-flex items-center justify-center px-8 py-4 text-base font-semibold text-gray-900 rounded-full shadow-lg transition-all duration-300 hover:shadow-xl hover:scale-105 whitespace-nowrap"
			style="background: linear-gradient(135deg, #FFE2EE 0%, #FFB3D9 50%, #FFE2EE 100%);"
		>
			Comienza tu transformación
		</a>
	</div>
</PageLayout>

<script>
	// Show floating CTA when hero buttons are out of view
	const floatingCta = document.getElementById('floating-cta');
	const heroSection = document.querySelector('section');
	
	if (floatingCta && heroSection) {
		const observer = new IntersectionObserver(
			(entries) => {
				entries.forEach((entry) => {
					if (entry.isIntersecting) {
						// Hero is visible - hide floating CTA
						floatingCta.classList.add('opacity-0', 'invisible', 'pointer-events-none');
					} else {
						// Hero is not visible - show floating CTA
						floatingCta.classList.remove('opacity-0', 'invisible', 'pointer-events-none');
					}
				});
			},
			{
				threshold: 0.1,
				rootMargin: '0px'
			}
		);
		
		observer.observe(heroSection);
	}
</script>

